from news.models import *
from django.contrib.auth.models import User
user_1 = User.objects.create_user(username = 'User1', email='user1@ya.ru')
user_2 = User.objects.create_user(username = 'User2', email='user2@ya.ru')
author1 = Author.objects.create(author=user_1)
author2 = Author.objects.create(author=user_2)
sports = Category.objects.create(category_name = 'Спорт')
science = Category.objects.create(category_name = 'Наука')
tech = Category.objects.create(category_name = 'Техника')
games = Category.objects.create(category_name = 'Игры')
post1 = Post.objects.create(title = 'Первая статья', body = 'Текст первой статьи!', type = 'PT', author = author1)
post2 = Post.objects.create(title = 'Вторая статья', body = 'Текст второй статьи!', type = 'PT', author = author2)
new1 = Post.objects.create(title = 'Первая новость', body = 'Текст новости!', type = 'NW', author = author1)
post1.category.add(sports, science)
post2.category.add(tech, games)
new1.category.add(sports, games)
comment1 = Comment.objects.create(post = post1, user = user_2, com_text = 'Отличный пост!')
comment2 = Comment.objects.create(post = post2, user = user_1, com_text = 'Отстой!')
comment3 = Comment.objects.create(post = post2, user = user_2, com_text = 'С мягким знаком!')
comment4 = Comment.objects.create(post = new1, user = user_1, com_text = 'Новость супер')
comment1.like()
comment1.like()
comment2.like()
comment2.like()
comment3.like()
comment4.like()
comment1.dislike()
comment3.dislike()
comment3.dislike()
comment3.dislike()
post1.dislike()
post2.like()
post2.like()
post2.like()
post2.like()
new1.like()
new1.like()
new1.like()
author1.update_rating()
author2.update_rating()
Author.objects.order_by('-rating').values('author__username','rating')[0]
Post.objects.order_by('-rating').values('create_date','author__author__username','rating','title','body')[0]
Comment.objects.filter(post = Post.objects.order_by("rating")[0]).values('create_date','com_text','rating')
